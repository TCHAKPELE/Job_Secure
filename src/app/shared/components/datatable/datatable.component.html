<div class="row">
  <div class="col-sm-12">
    <div class="card">
      <div class="card-header">
        <h5 class="text-primary">
          {{labelDataTable}} <span class="text-success"></span>
        </h5>
      </div>
      <div class="card-body table-responsive">

        <table
          mat-table
          aria-describedby="Tableau de donnée"
          [dataSource]="dataSource"
          class="mat-elevation-z2"
          matSort
        >
          <!-- Colonnes -->
          <ng-container
            *ngFor="let col of columns; index as i"
            [matColumnDef]="col"
          >
            <th mat-header-cell *matHeaderCellDef>{{ displayedColumns[i] }}</th>

            <span *ngIf=" columns[i] != 'actions' && columns[i] != 'buttons' &&  columns[i] != 'badges'">
            <td mat-cell *matCellDef="let element" >{{ element[col] }}</td>

            </span>
            <!-- action dropdown-->
            <span *ngIf="columns[i] == 'actions'">
                <td mat-cell *matCellDef="let element">
                    <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Actions">
                      <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                      <button mat-menu-item *ngFor="let action of actions" (click)="action.action(element)">
                        {{ action.label }}
                      </button>
                    </mat-menu>
                  </td>
            </span>
            <!--Bouton -->
            <span *ngIf="columns[i] == 'buttons'">
                <td mat-cell *matCellDef="let element">
                    <button  *ngFor="let buttonAction of buttonsAction" [ngClass]="'me-1 btn btn-' + buttonAction.color" (click)="buttonAction.action(element)">
                        {{buttonAction.label}}
                    </button>
                  </td>
            </span>

            <!--Badge-->
            <span *ngIf="columns[i] == 'badges'">
                <td mat-cell *matCellDef="let element">
                    <span [class]="'badge text-bg-' + getBadgeColor(element[columnStatusName], badges)">
                      {{ getStatusLabel(element[columnStatusName], badges) }}
                    </span>
                  </td>
                  
            </span>
          </ng-container>

          

          <!-- Lignes -->
          <tr mat-header-row *matHeaderRowDef="columns"></tr>
          <tr mat-row *matRowDef="let row; columns: columns"></tr>
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell text-center p-2" colspan="12">
              Aucune donnée retournée
            </td>
          </tr>
        </table>
        <mat-paginator
          [pageSizeOptions]="pageSizeOptions"
          [pageSize]="defaultPageSize"
          [length]="data.length"
        ></mat-paginator>
      </div>
    </div>
  </div>
</div>
